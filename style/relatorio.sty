%%  Estilo para relatórios Projecto Integrado.
%

%%%%%
%%%%%   PRELIMS
%%%%%

\typeout{Estilo para relat\'orios da disciplina de Projecto Integrado <$Date: 6/06/2005 $>.}

% First thing we do is make sure that report has been loaded.  A
% common error is to try to use relatorio as a documentstyle.
\@ifundefined{chapter}{\@latexerr{The `relatorio' option should be used
with the `report' document style}{You should probably read the
relatorio documentation.}}{}

%%%%%
%%%%%   DOCUMENTATION
%%%%%


\long\def\comment#1{}
\comment{

  Examplo de utilização:
    \documentclass{report}

    \usepackage{style/relatorio}

    \dept{Inform\'atica e Comunica\c c\~oes}
    \course{Engenharia Inform\'atica}


        \begin{document}
        \title{Como Escrever Relatórios\\
                Com Títulos de Duas Linhas}
        \author{João Candidato}
        \supervisor{Orlando Orientador}
        \cosupervisor{Carlos Coorientador}
        \firstreader{Antunes Arguente}
        \secondreader{Alberto Arguente (Outro Departmento)}

        \beforepreface
        \prefacesection{Prefácio}
            Este relatório cobre tudo o que for necessário saber sobre...
        \prefacesection{Agradecimentos}
            Gostaria de agradecer...
        \afterpreface

        \chapter{Introdução}
             ...
        \chapter{Conclusões}
             ...
        \appendix
        \chapter{Um Apêndice}
             ...
        \bibliographystyle{plain}
        \bibliography{minhabib}
        \end{document}

    Documentation:
        This style file modifies the standard report style to follow the
        Graduate Degree Support Section of the Registrar's Office's
        "Directions for Preparing Doctoral Dissertations".  It sets the
        margins and interline spacing and disallows page breaks at
        hyphens.

        The \beforepreface command creates the title page, a disclaimer page
        (optionally), and a signature page.  Then the user should put
        preface section(s), using the \prefacesection{section title}
        command.  The \afterpreface command then produces the tables of
        contents, tables and figures, and sets things up to start
        the main body (on arabic page 1).

        The following commands can control what goes in the front matter
        material:

            \title{thesis title}
            \author{author's name}
    	\authnum{author's number}
            \dept{author's department}
                    - Informática e Comunicações if omitted
            \course{author's course}
                    - Engenharia Informática if omitted
    The following switches allow for special title pages (not all are current)
            \supervisor{the principal supervisor's name}
            \cosupervisor{optional second supervisor's name}
            \firstreader{the first reader's name}
            \secondreader{the second reader's name}
            \thirdreader{optional third reader's name}
            \submitdate{month year in which submitted to GPO}
                    - date LaTeX'd if omitted
            \disclaimertrue or \disclaimerfalse
                    - produces or don't produce the disclaimer page
            \figurespagetrue or \figurespagefalse
                    - produce or don't produce a List of Figures page
                      (true by default)
            \tablespagetrue or \tablespagefalse
                    - produce or don't produce a List of Tables page
                      (true by default)

    This style uses normal interline spacing.
    That can be changed by doing:
        \setstretch{1.5}
    (or whatever you want instead of 1.3)

    This command should be put before the \begin{document} command but
    after loading the packages

    You can also set any particular section in singlespacing mode by using
    the singlespace environment.  For example

    \begin{quote}
    \begin{singlespace}
    ...
    \end{singlespace}
    \end{quote}

    makes the quote singlespaced.  See the documentation for setspace.sty
    for more information.

    The example at the beginning shows the 12pt substyle being used.  This
    seems to give acceptable looking results, but it may be omitted to get
    smaller print.

}

%%%%%
%%%%%   SETUP DOUBLESPACING
%%%%%

% include doublespace.sty for some of the stuff below

\RequirePackage{setspace}
\RequirePackage{graphicx}
\RequirePackage[utf8]{inputenc}
\RequirePackage[portuges]{babel}



% Use 1.3 times the normal baseline-to-baseline skip
%\setstretch{1.3}


%%%%%
%%%%%   SETUP MARGINS AND PENALTIES
%%%%%

% We need 1" margins except on the binding edge, where it is 1 1/2"
% Theses may be either single or double sided
  \if@twoside
     \setlength\oddsidemargin   {0\p@}
     \setlength\evensidemargin  {0\p@}
     \setlength\marginparwidth {40\p@}
  \else
     \setlength\oddsidemargin   {0\p@}
     \setlength\evensidemargin  {0\p@}
     \setlength\marginparwidth  {40\p@}
  \fi

\marginparsep 10pt
%\oddsidemargin 0.5in \evensidemargin 0in
%\marginparwidth 40pt


\topmargin 0pt \headsep 1cm
\textheight 22cm \textwidth 16cm

% Disallow page breaks at hyphens (this will give some underfull vbox's,
% so an alternative is to use \brokenpenalty=100 and manually search
% for and fix such page breaks)
\brokenpenalty=10000

%%%%%
%%%%%   SETUP COMMANDS
%%%%%

% \author, \title are defined in report; here are the rest of the
% front matter defining macros
\def\dept#1{\gdef\@dept{#1}}
\def\authnum#1{\gdef\@authnum{#1}}
\def\secauthnum#1{\gdef\@secauthnum{#1}}
\def\course#1{\gdef\@course{#1}}
\def\courseyear#1{\gdef\@courseyear{#1}}
\def\secondauthor#1{\gdef\@secondauthor{#1}}
\def\supervisor{Orientador} % default spelling
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}\gdef\supervisor{Supervisor}}
%\def\cosupervisor#1{\gdef\@cosupervisor{#1}\gdef\cosupervisor{Co-orientador}}
\def\firstreader#1{\gdef\@firstreader{#1}}
\def\secondreader#1{\gdef\@secondreader{#1}}
\def\thirdreader#1{\gdef\@thirdreader{#1}}
\def\submitdate#1{\gdef\@submitdate{#1}}
\def\@title{}\def\@author{}\def\@dept{Inform\'atica e Comunica\c c\~oes}\def\@course{Sistemas de Informa\c{c}\~{a}o}\def\@courseyear{2012}
\def\@supervisor{}\def\@firstreader{*}\def\@secondreader{*}
\def\@authnum{*}\def\@secauthnum{*}
\def\@cosupervisor{*}
\def\@thirdreader{*}
\def\@submitdate{\ifcase\the\month\or
  Janeiro\or Fevereiro\or Mar\c co\or Abril\or Maio\or Junho\or
  July\or August\or Setembro\or Outubro\or Novembro\or Dezembro\fi
  \space \number\the\year}
\newif\iffigurespage \newif\iftablespage \newif\ifdisclaimer
\disclaimertrue \figurespagetrue \tablespagetrue


\def\coverpage{%
\thispagestyle{empty}%

%\hspace{-4cm}
\begin{center}
    \includegraphics[width=0.9\columnwidth, keepaspectratio]{etc/logoh.png}\\
\end{center}


%\null\vskip1in%
\begin{center}
    {\Huge\expandafter{\bf \@title}}
    \vfill
    {\Large\textbf{
    \@author \quad\@authnum\\
    \@secondauthor\quad \@secauthnum}}
    \vfill
    %Trabalho realizado sob a orienta\c{c}\~{a}o de\\
    Relat\'{o}rio Final do Trabalho de Projecto apresentado \`{a}\\
    \textbf{
        Escola Superior de Tecnologia e de Gest\~{a}o\\
        Instituto Polit\'{e}cnico de Bragan\c{c}a
    }
    \null\vskip0.1cm%
	para obten\c{c}\~{a}o do grau de Mestre em\\
    {\bf \@course}\\
	%\@supervisor\\
	%\@cosupervisor
	
    \vfill
    \begin{small}
	%{\bf\@course}\\
	%{\bf\@courseyear}\\
    \@submitdate\\
%   \flushright Departamento de \expandafter{\bf \@dept}\\
    \end{small}
\end{center}

\newpage
\thispagestyle{empty}
\mbox{}

\newpage}

\def\titlep{%
    \thispagestyle{empty}%

    \begin{center}
        \includegraphics[width=0.9\columnwidth, keepaspectratio]{etc/logoh.png}\\
    \end{center}

    %\null\vskip1in%
    \begin{center}
        {\Huge\expandafter{\bf \@title}}
        \vfill
        \null\vskip1.0cm
        {\Large\textbf{
        \@author \quad\@authnum}}
    \end{center}

    \vfill
    \null\vskip0.5cm

    \begin{center}
        Relat\'{o}rio Final do Trabalho de Projecto apresentado \`{a}\\
        \textbf{
            Escola Superior de Tecnologia e de Gest\~{a}o\\
            Instituto Polit\'{e}cnico de Bragan\c{c}a
        }
        \null\vskip0.1cm%
        para obten\c{c}\~{a}o do grau de Mestre em\\
        {\bf \@course}\\
        %Relat\'orio da UC de Projecto\\
        \null\vskip0.1cm%
        Orientador:\\%Este Trabalho de Projecto foi elaborado sob a Orienta\c{c}\~{a}o de:\\
        {\bf \@supervisor}\\
        \null\vskip0.1cm%
        "Este Trabalho de Projecto n\~{a}o inclui as cr\'{i}ticas e sugest\~{o}es feitas pelo J\'{u}ri."
    \end{center}

    %\vfill
    \begin{center}
        \@submitdate\\
    \end{center}\vskip.5in

    \newpage
    \thispagestyle{empty}
    \mbox{}

    \newpage
}

%
%\def\disclaimerpage{%
%        \null\vfill
%        \begin{flushleft}
%                %A Escola Superior de Tecnologia e de Gest\~ao n\~ao se responsabiliza pelas opini\~oes expressas neste relat\'orio.
%	     Escola Superior de Tecnologia e de Gest\~ao is not responsible for the opinions expressed in this document.
%        \end{flushleft}
%        \vfill
%
\newpage
\thispagestyle{empty}
% \mbox{}
%
%\newpage}


%\long\def\signature#1{%
%\begin{flushright}
%\begin{minipage}{5in}
%\parindent=0pt
%%Certifico que li este relat\'orio e que, na minha opini\~ao, \'e adequado no seu conte\'udo e forma como demonstrador do trabalho desenvolvido no \^ambito da UC de Projecto.
%I certify that i have read this dissertation and that, in my opinion, is appropriate in content and form as a demonstrator of the developed work.
%\par
%\vspace{.5in}
%%\hbox to 4in{\hfil\shortstack{\vrule width 3in height 0.4pt\\ #1}}
%\hbox to 5in{\hfil\begin{tabular}{@{}l@{}}\vrule width 3in height
%    0.4pt depth 0pt\\ #1\end{tabular}}
%\end{minipage}
%\end{flushright}}
%
%\def\signaturepage{%
%        \signature{\@supervisor\quad (\supervisor)}
%        \vfill
%% if second principal advisor
%        \if*\@cosupervisor \else
%        \signature{\@cosupervisor\quad (Co-\supervisor)}
%        \vfill\fi
%        \if*\@firstreader \else
%        \signature{\@firstreader\quad Board}
%        \vfill\fi
%        \if*\@secondreader \else
%        \signature\@secondreader
%        \vfill\fi
%% if thirdreader then do \signature\@thirdreader \vfill
%        \if*\@thirdreader \else
%        \signature\@thirdreader
%        \vfill\fi
%        \begin{flushright}
%        \begin{minipage}{5in}
%        %Aceite para avaliação da UC de Projecto.\par
%        Accepted for assessment of the dissertation in Information Systems.
%        \vspace{.5in}
%%        \hbox to 4in{\hfil\shortstack{\vrule width 3in height 0.4pt}}
%        \end{minipage}
%        \end{flushright}}
%
\def\beforepreface{
        \pagenumbering{roman}
        \pagestyle{plain}
        \coverpage
        \titlep
        %\ifdisclaimer\disclaimerpage\fi
        %\signaturepage
        \cleardoublepage}


\def\prefacesection#1{%

        \chapter*{#1}
        \addcontentsline{toc}{chapter}{#1}}

\def\afterpreface{\newpage
	\newpage
\mbox{}
        \tableofcontents
        \iftablespage
                \listoftables
        \fi
        \iffigurespage
	\newpage
\mbox{}
                \listoffigures
        \fi
	}

\def\bodystart{
        \cleardoublepage
        \pagenumbering{arabic}
        \pagestyle{headings}}

% Redefine \thebibliography to go to a new page and put an entry in the
% table of contents
\let\@ldthebibliography\thebibliography
\renewcommand{\thebibliography}[1]{\newpage
                \@ldthebibliography{#1}%
\addcontentsline{toc}{chapter}{\bibname}}

% Start out normal
\pagestyle{headings}
